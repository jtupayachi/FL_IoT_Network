[93mWARNING [0m:   DEPRECATED FEATURE: flwr.server.start_server() is deprecated.
	Instead, use the `flower-superlink` CLI command to start a SuperLink as shown below:

		$ flower-superlink --insecure

	To view usage and all available options, run:

		$ flower-superlink --help

	Using `start_server()` is deprecated.

            This is a deprecated feature. It will be removed
            entirely in future versions of Flower.
        
[92mINFO [0m:      Starting Flower server, config: num_rounds=10, no round_timeout
[92mINFO [0m:      Flower ECE: gRPC server running (10 rounds), SSL is disabled
[92mINFO [0m:      [INIT]
[92mINFO [0m:      Requesting initial parameters from one random client
[92mINFO [0m:      Received initial parameters from one random client
[92mINFO [0m:      Starting evaluation of initial global parameters
[92mINFO [0m:      initial parameters (loss, other metrics): 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}
[92mINFO [0m:      
[92mINFO [0m:      [ROUND 1]
[92mINFO [0m:      configure_fit: strategy sampled 12 clients (out of 25)
[92mINFO [0m:      aggregate_fit: received 12 results and 0 failures
[93mWARNING [0m:   No fit_metrics_aggregation_fn provided
[92mINFO [0m:      fit progress: (1, 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}, 82.25921056700463)
[92mINFO [0m:      configure_evaluate: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_evaluate: received 25 results and 0 failures
[93mWARNING [0m:   No evaluate_metrics_aggregation_fn provided
[92mINFO [0m:      
[92mINFO [0m:      [ROUND 2]
[92mINFO [0m:      configure_fit: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_fit: received 25 results and 0 failures
[92mINFO [0m:      fit progress: (2, 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}, 85.37665512700187)
[92mINFO [0m:      configure_evaluate: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_evaluate: received 25 results and 0 failures
[92mINFO [0m:      
[92mINFO [0m:      [ROUND 3]
[92mINFO [0m:      configure_fit: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_fit: received 25 results and 0 failures
[92mINFO [0m:      fit progress: (3, 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}, 88.70756768000138)
[92mINFO [0m:      configure_evaluate: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_evaluate: received 25 results and 0 failures
[92mINFO [0m:      
[92mINFO [0m:      [ROUND 4]
[92mINFO [0m:      configure_fit: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_fit: received 25 results and 0 failures
[92mINFO [0m:      fit progress: (4, 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}, 91.41318710600171)
[92mINFO [0m:      configure_evaluate: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_evaluate: received 25 results and 0 failures
[92mINFO [0m:      
[92mINFO [0m:      [ROUND 5]
[92mINFO [0m:      configure_fit: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_fit: received 25 results and 0 failures
[92mINFO [0m:      fit progress: (5, 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}, 97.47931467500166)
[92mINFO [0m:      configure_evaluate: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_evaluate: received 25 results and 0 failures
[92mINFO [0m:      
[92mINFO [0m:      [ROUND 6]
[92mINFO [0m:      configure_fit: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_fit: received 25 results and 0 failures
[92mINFO [0m:      fit progress: (6, 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}, 99.9004395850061)
[92mINFO [0m:      configure_evaluate: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_evaluate: received 25 results and 0 failures
[92mINFO [0m:      
[92mINFO [0m:      [ROUND 7]
[92mINFO [0m:      configure_fit: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_fit: received 25 results and 0 failures
[92mINFO [0m:      fit progress: (7, 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}, 102.6809359060062)
[92mINFO [0m:      configure_evaluate: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_evaluate: received 25 results and 0 failures
[92mINFO [0m:      
[92mINFO [0m:      [ROUND 8]
[92mINFO [0m:      configure_fit: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_fit: received 25 results and 0 failures
[92mINFO [0m:      fit progress: (8, 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}, 105.11906018100126)
[92mINFO [0m:      configure_evaluate: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_evaluate: received 25 results and 0 failures
[92mINFO [0m:      
[92mINFO [0m:      [ROUND 9]
[92mINFO [0m:      configure_fit: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_fit: received 25 results and 0 failures
[92mINFO [0m:      fit progress: (9, 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}, 110.37202013700153)
[92mINFO [0m:      configure_evaluate: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_evaluate: received 25 results and 0 failures
[92mINFO [0m:      
[92mINFO [0m:      [ROUND 10]
[92mINFO [0m:      configure_fit: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_fit: received 25 results and 0 failures
[92mINFO [0m:      fit progress: (10, 0.0, {'rmse': 0.0, 'mse': 0.0, 'mae': 0.0, 'r2': 0.0}, 115.63124292800057)
[92mINFO [0m:      configure_evaluate: strategy sampled 25 clients (out of 25)
[92mINFO [0m:      aggregate_evaluate: received 25 results and 0 failures
[92mINFO [0m:      
[92mINFO [0m:      [SUMMARY]
[92mINFO [0m:      Run finished 10 round(s) in 116.08s
[92mINFO [0m:      	History (loss, distributed):
[92mINFO [0m:      		round 1: 9205.276565984783
[92mINFO [0m:      		round 2: 7298.37930874552
[92mINFO [0m:      		round 3: 7284.474210149323
[92mINFO [0m:      		round 4: 7286.564420594258
[92mINFO [0m:      		round 5: 7275.35588250323
[92mINFO [0m:      		round 6: 7277.110559155583
[92mINFO [0m:      		round 7: 7278.322276326303
[92mINFO [0m:      		round 8: 7283.455013703766
[92mINFO [0m:      		round 9: 7280.132839055085
[92mINFO [0m:      		round 10: 7278.04424580265
[92mINFO [0m:      	History (loss, centralized):
[92mINFO [0m:      		round 0: 0.0
[92mINFO [0m:      		round 1: 0.0
[92mINFO [0m:      		round 2: 0.0
[92mINFO [0m:      		round 3: 0.0
[92mINFO [0m:      		round 4: 0.0
[92mINFO [0m:      		round 5: 0.0
[92mINFO [0m:      		round 6: 0.0
[92mINFO [0m:      		round 7: 0.0
[92mINFO [0m:      		round 8: 0.0
[92mINFO [0m:      		round 9: 0.0
[92mINFO [0m:      		round 10: 0.0
[92mINFO [0m:      	History (metrics, centralized):
[92mINFO [0m:      	{'mae': [(0, 0.0),
[92mINFO [0m:      	         (1, 0.0),
[92mINFO [0m:      	         (2, 0.0),
[92mINFO [0m:      	         (3, 0.0),
[92mINFO [0m:      	         (4, 0.0),
[92mINFO [0m:      	         (5, 0.0),
[92mINFO [0m:      	         (6, 0.0),
[92mINFO [0m:      	         (7, 0.0),
[92mINFO [0m:      	         (8, 0.0),
[92mINFO [0m:      	         (9, 0.0),
[92mINFO [0m:      	         (10, 0.0)],
[92mINFO [0m:      	 'mse': [(0, 0.0),
[92mINFO [0m:      	         (1, 0.0),
[92mINFO [0m:      	         (2, 0.0),
[92mINFO [0m:      	         (3, 0.0),
[92mINFO [0m:      	         (4, 0.0),
[92mINFO [0m:      	         (5, 0.0),
[92mINFO [0m:      	         (6, 0.0),
[92mINFO [0m:      	         (7, 0.0),
[92mINFO [0m:      	         (8, 0.0),
[92mINFO [0m:      	         (9, 0.0),
[92mINFO [0m:      	         (10, 0.0)],
[92mINFO [0m:      	 'r2': [(0, 0.0),
[92mINFO [0m:      	        (1, 0.0),
[92mINFO [0m:      	        (2, 0.0),
[92mINFO [0m:      	        (3, 0.0),
[92mINFO [0m:      	        (4, 0.0),
[92mINFO [0m:      	        (5, 0.0),
[92mINFO [0m:      	        (6, 0.0),
[92mINFO [0m:      	        (7, 0.0),
[92mINFO [0m:      	        (8, 0.0),
[92mINFO [0m:      	        (9, 0.0),
[92mINFO [0m:      	        (10, 0.0)],
[92mINFO [0m:      	 'rmse': [(0, 0.0),
[92mINFO [0m:      	          (1, 0.0),
[92mINFO [0m:      	          (2, 0.0),
[92mINFO [0m:      	          (3, 0.0),
[92mINFO [0m:      	          (4, 0.0),
[92mINFO [0m:      	          (5, 0.0),
[92mINFO [0m:      	          (6, 0.0),
[92mINFO [0m:      	          (7, 0.0),
[92mINFO [0m:      	          (8, 0.0),
[92mINFO [0m:      	          (9, 0.0),
[92mINFO [0m:      	          (10, 0.0)]}
[92mINFO [0m:      
Traceback (most recent call last):
  File "/mnt/ceph_drive/FL_IoT_Network/scale/server.py", line 1780, in run_server
    print(f"   Round metrics: {os.path.join(metrics_dir, 'round_metrics.csv')}")
                                            ^^^^^^^^^^^
NameError: name 'metrics_dir' is not defined
🚀 Starting NASA Federated Learning Server
==================================================
Experiment ID: nasa_25c_alpha_0.1_fedavg
Algorithm: FEDAVG
Server: localhost:8686
Rounds: 10
Strategy: fedavg
Min Clients: 25
Fit Fraction: 1.0
Eval Fraction: 1.0
Results Directory: /mnt/ceph_drive/FL_IoT_Network/scale/results/run_20251029_152144/nasa_25c_alpha_0.1_fedavg
==================================================
🔄 Starting FL server on localhost:8686...
📊 Evaluation enabled: True
📊 Round 1 Fit Metrics:
   Clients: 12
   Avg Train Loss: 8412.0514
   Avg Val Loss: 8299.5802
   Avg Val R²: -0.1624
🧪 Round 1 Client Test Evaluation:
   Clients: 25
   Avg Test Loss: 9107.5719
   Avg Test R²: 0.0000
📊 Round 2 Fit Metrics:
   Clients: 25
   Avg Train Loss: 7164.8829
   Avg Val Loss: 7021.9785
   Avg Val R²: -0.0084
🧪 Round 2 Client Test Evaluation:
   Clients: 25
   Avg Test Loss: 7238.6674
   Avg Test R²: 0.0000
📊 Round 3 Fit Metrics:
   Clients: 25
   Avg Train Loss: 7160.7945
   Avg Val Loss: 7017.9933
   Avg Val R²: -0.0078
🧪 Round 3 Client Test Evaluation:
   Clients: 25
   Avg Test Loss: 7225.7140
   Avg Test R²: 0.0000
📊 Round 4 Fit Metrics:
   Clients: 25
   Avg Train Loss: 7161.2966
   Avg Val Loss: 7019.5704
   Avg Val R²: -0.0083
🧪 Round 4 Client Test Evaluation:
   Clients: 25
   Avg Test Loss: 7227.6536
   Avg Test R²: 0.0000
📊 Round 5 Fit Metrics:
   Clients: 25
   Avg Train Loss: 7154.0821
   Avg Val Loss: 7011.9765
   Avg Val R²: -0.0069
🧪 Round 5 Client Test Evaluation:
   Clients: 25
   Avg Test Loss: 7217.2914
   Avg Test R²: 0.0000
📊 Round 6 Fit Metrics:
   Clients: 25
   Avg Train Loss: 7153.2073
   Avg Val Loss: 7011.2712
   Avg Val R²: -0.0068
🧪 Round 6 Client Test Evaluation:
   Clients: 25
   Avg Test Loss: 7218.9068
   Avg Test R²: 0.0000
📊 Round 7 Fit Metrics:
   Clients: 25
   Avg Train Loss: 7159.6741
   Avg Val Loss: 7016.1163
   Avg Val R²: -0.0075
🧪 Round 7 Client Test Evaluation:
   Clients: 25
   Avg Test Loss: 7220.0239
   Avg Test R²: 0.0000
📊 Round 8 Fit Metrics:
   Clients: 25
   Avg Train Loss: 7159.5382
   Avg Val Loss: 7018.2190
   Avg Val R²: -0.0078
🧪 Round 8 Client Test Evaluation:
   Clients: 25
   Avg Test Loss: 7224.7693
   Avg Test R²: 0.0000
📊 Round 9 Fit Metrics:
   Clients: 25
   Avg Train Loss: 7159.0420
   Avg Val Loss: 7016.0707
   Avg Val R²: -0.0077
🧪 Round 9 Client Test Evaluation:
   Clients: 25
   Avg Test Loss: 7221.6954
   Avg Test R²: 0.0000
📊 Round 10 Fit Metrics:
   Clients: 25
   Avg Train Loss: 7156.8313
   Avg Val Loss: 7013.3104
   Avg Val R²: -0.0070
🧪 Round 10 Client Test Evaluation:
   Clients: 25
   Avg Test Loss: 7219.7675
   Avg Test R²: 0.0000
✅ Server completed successfully!
📊 Results saved to: /mnt/ceph_drive/FL_IoT_Network/scale/results/run_20251029_152144/nasa_25c_alpha_0.1_fedavg/nasa_25c_alpha_0.1_fedavg

📈 FINAL SUMMARY:
❌ Server error: name 'metrics_dir' is not defined
Traceback (most recent call last):
  File "/mnt/ceph_drive/FL_IoT_Network/scale/server.py", line 1792, in <module>
    main()
  File "/mnt/ceph_drive/FL_IoT_Network/scale/server.py", line 1685, in main
    run_server(args)
  File "/mnt/ceph_drive/FL_IoT_Network/scale/server.py", line 1780, in run_server
    print(f"   Round metrics: {os.path.join(metrics_dir, 'round_metrics.csv')}")
                                            ^^^^^^^^^^^
NameError: name 'metrics_dir' is not defined
